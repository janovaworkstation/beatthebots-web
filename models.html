<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Models — Beat the Bots Daily</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,700;0,900;1,400;1,700&family=Courier+Prime:wght@400;700&family=EB+Garamond:ital,wght@0,400;1,400&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="css/shared.css" />
  <style>
    /* ── MODELS-SPECIFIC ── */
    .models-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 16px; margin-bottom: 64px; }
    .model-selector {
      padding: 20px 16px; text-align: center; cursor: pointer;
      border: 1px solid var(--muted); transition: all 0.2s;
    }
    .model-selector:hover { border-color: var(--gold-dim); }
    .model-selector.active { border-color: var(--gold); background: rgba(201,160,82,0.06); }
    .model-selector .dot-lg { width: 14px; height: 14px; border-radius: 50%; margin: 0 auto 10px; }
    .model-selector .m-name { font-family: 'Playfair Display', serif; font-size: 15px; font-weight: 700; color: var(--cream); }
    .model-selector .m-provider { font-family: 'Courier Prime', monospace; font-size: 8px; letter-spacing: 0.15em; text-transform: uppercase; color: var(--muted); margin-top: 3px; }

    /* model profile */
    .model-profile { display: none; }
    .model-profile.visible { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; align-items: start; }

    .profile-left {}
    .profile-header { display: flex; align-items: center; gap: 16px; margin-bottom: 24px; }
    .profile-dot { width: 18px; height: 18px; border-radius: 50%; flex-shrink: 0; }
    .profile-name { font-family: 'Playfair Display', serif; font-size: 44px; font-weight: 900; line-height: 1; color: var(--cream); }
    .profile-provider { font-family: 'Courier Prime', monospace; font-size: 11px; letter-spacing: 0.22em; text-transform: uppercase; color: var(--muted); margin-top: 4px; }
    .profile-character { font-size: 17px; font-style: italic; color: var(--cream-dim); margin-bottom: 24px; line-height: 1.6; border-left: 2px solid var(--gold-dim); padding-left: 16px; }

    .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 28px; }
    .stat-box { background: var(--bg-elevated); padding: 16px 18px; }
    .stat-label { font-family: 'Courier Prime', monospace; font-size: 9px; letter-spacing: 0.2em; text-transform: uppercase; color: var(--muted); margin-bottom: 4px; }
    .stat-value { font-family: 'Playfair Display', serif; font-size: 26px; font-weight: 700; color: var(--gold); }
    .stat-sub { font-family: 'Courier Prime', monospace; font-size: 10px; color: var(--cream-dim); }

    .profile-right {}
    .game-record { margin-bottom: 24px; }
    .game-record-title { font-family: 'Courier Prime', monospace; font-size: 9px; letter-spacing: 0.22em; text-transform: uppercase; color: var(--muted); margin-bottom: 14px; }
    .game-record-row { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid rgba(92,72,53,0.3); }
    .game-record-row:first-of-type { border-top: 1px solid rgba(92,72,53,0.3); }
    .game-record-name { font-family: 'Playfair Display', serif; font-size: 17px; font-weight: 700; color: var(--cream); }
    .game-record-stat { font-family: 'Courier Prime', monospace; font-size: 11px; letter-spacing: 0.1em; color: var(--cream-dim); }
    .game-record-avg { font-family: 'Playfair Display', serif; font-size: 18px; font-weight: 700; }

    .rank-badge {
      display: inline-flex; align-items: center; gap: 8px;
      border: 1px solid var(--gold-dim); padding: 8px 16px;
      font-family: 'Courier Prime', monospace; font-size: 10px;
      letter-spacing: 0.18em; text-transform: uppercase;
    }
    .rank-badge .rank-num { font-family: 'Playfair Display', serif; font-size: 22px; font-weight: 700; color: var(--gold); }

    /* loading / error states */
    .loading-state, .error-state {
      padding: 64px 0;
      text-align: center;
      font-family: 'Courier Prime', monospace;
      font-size: 11px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }
    .loading-state { color: var(--muted); }
    .error-state { color: var(--gold-dim); }
    .error-state strong { display: block; color: var(--cream-dim); font-size: 14px; margin-bottom: 8px; letter-spacing: 0.1em; }

    @media (max-width: 900px) {
      .models-grid { grid-template-columns: repeat(3, 1fr); }
      .model-profile.visible { grid-template-columns: 1fr; }
    }
    @media (max-width: 560px) {
      .models-grid { grid-template-columns: repeat(2, 1fr); }
      .stat-grid { grid-template-columns: 1fr 1fr; }
    }
  </style>
</head>
<body>

  <nav>
    <a href="index.html" class="nav-logo">Beat <span>the Bots</span> Daily</a>
    <ul class="nav-links">
      <li><a href="standings.html">Standings</a></li>
      <li><a href="today.html">Today</a></li>
      <li><a href="episodes.html">Episodes</a></li>
      <li><a href="models.html" class="active">Models</a></li>
    </ul>
    <a href="index.html#waitlist" class="nav-cta">Join Waitlist</a>
    <button class="nav-hamburger" onclick="document.querySelector('.nav-links').classList.toggle('open')">☰</button>
  </nav>

  <div class="page-content">

    <div class="band band-dark">
      <div class="inner" style="padding-bottom:40px;border-bottom:1px solid var(--muted);">
        <span class="label">The Competitors</span>
        <h1 class="page-title serif">AI Models</h1>
      </div>
    </div>

    <div class="band band-dark">
      <div class="inner">
        <div id="models-container">
          <div class="loading-state">Loading model profiles…</div>
        </div>
      </div>
    </div>

  </div>

  <footer>
    <a href="index.html" class="footer-logo">Beat <span>the Bots</span> Daily</a>
    <ul class="footer-links">
      <li><a href="#">YouTube</a></li><li><a href="#">Instagram</a></li><li><a href="#">TikTok</a></li><li><a href="models.html">Models</a></li><li><a href="#">Privacy</a></li>
    </ul>
    <div class="footer-copy">&copy; 2026 Beat the Bots Daily</div>
  </footer>

  <script src="js/config.js"></script>
  <script>
    // ── Display name overrides ────────────────────────────────────────────────
    const DISPLAY_NAMES = { 'GPT-5.2': 'GPT-4o' };
    function dName(raw) { return DISPLAY_NAMES[raw] || raw; }

    // ── Editorial character descriptions (keyed by model_id) ─────────────────
    const QUOTES = {
      1: "Methodical and thoughtful. Claude reasons carefully through each step, often narrating its uncertainty before committing to a guess. Rarely reckless, occasionally frustratingly cautious.",
      2: "Confident and direct. GPT-4o commits to guesses quickly and rarely second-guesses itself. Its Wordle performance is consistently the strongest on the leaderboard.",
      3: "Analytical and broad. Gemini approaches puzzles systematically but can overthink the lateral-thinking challenges. Surprisingly strong on Strands.",
      4: "Edgy and unpredictable. Grok can be brilliant one day and completely fall apart the next. It's the most entertaining model to watch — you never know what you're going to get.",
      6: "The wildcard challenger. Kimi arrives from China with serious capabilities and an unpredictable style. Often overlooked, occasionally dominant. The model everyone underestimates."
    };

    // ── Score class helpers ───────────────────────────────────────────────────
    function solveRateClass(rate) {
      if (rate >= 0.85) return 'score-good';
      if (rate >= 0.70) return 'score-ok';
      return 'score-bad';
    }
    function wordleAvgClass(avg) {
      if (avg <= 3.5) return 'score-good';
      if (avg <= 4.5) return 'score-ok';
      return 'score-bad';
    }

    // ── Render a single model profile ─────────────────────────────────────────
    function profileHTML(m, todayEntry) {
      const id = m.model_id;
      const name = dName(m.model_name);
      const quote = QUOTES[id] || '';
      const ws = m.game_stats.wordle;
      const cs = m.game_stats.connections;
      const ss = m.game_stats.strands;
      const ks = m.game_stats.keyword;

      // Stat boxes
      const rankLabel = m.all_time_rank === 1 ? 'All-Time Leader' : `All-Time #${m.all_time_rank}`;
      const statBoxes = `
        <div class="stat-box">
          <div class="stat-label">All-Time Rank</div>
          <div class="stat-value">#${m.all_time_rank}</div>
          <div class="stat-sub">Overall standings</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">Avg Points / Day</div>
          <div class="stat-value">${m.avg_points_per_day.toFixed(1)}</div>
          <div class="stat-sub">Across all games</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">Wordle Avg</div>
          <div class="stat-value">${ws ? ws.avg_attempts.toFixed(1) : '—'}</div>
          <div class="stat-sub">Attempts per game</div>
        </div>
        <div class="stat-box">
          <div class="stat-label">Connections Win%</div>
          <div class="stat-value">${cs ? Math.round(cs.solve_rate * 100) + '%' : '—'}</div>
          <div class="stat-sub">Solve rate</div>
        </div>`;

      // Game-by-game records
      function gameRow(label, stats, avgText, avgClass) {
        if (!stats) return '';
        const solveText = `${Math.round(stats.solve_rate * 100)}% solved`;
        return `<div class="game-record-row">
          <div class="game-record-name">${label}</div>
          <div class="game-record-stat">${solveText}</div>
          <div class="game-record-avg ${avgClass}">${avgText}</div>
        </div>`;
      }

      const wordleRow = gameRow('Wordle', ws,
        ws ? `${ws.avg_attempts.toFixed(1)} avg` : '—',
        ws ? wordleAvgClass(ws.avg_attempts) : '');

      const connRow = cs ? `<div class="game-record-row">
        <div class="game-record-name">Connections</div>
        <div class="game-record-stat">${Math.round(cs.solve_rate * 100)}% solve rate</div>
        <div class="game-record-avg ${solveRateClass(cs.solve_rate)}">${Math.round(cs.solve_rate * 100)}%</div>
      </div>` : '';

      const strandsRow = ss ? `<div class="game-record-row">
        <div class="game-record-name">Strands</div>
        <div class="game-record-stat">${Math.round(ss.solve_rate * 100)}% solve rate</div>
        <div class="game-record-avg ${solveRateClass(ss.solve_rate)}">${Math.round(ss.avg_score * 100)}% avg</div>
      </div>` : '';

      const keyRow = ks ? `<div class="game-record-row">
        <div class="game-record-name">Keyword</div>
        <div class="game-record-stat">${Math.round(ks.solve_rate * 100)}% solve rate</div>
        <div class="game-record-avg ${solveRateClass(ks.solve_rate)}">${Math.round(ks.avg_score * 100)}% avg</div>
      </div>` : '';

      // Today teaser
      let todayTeaser = '';
      if (todayEntry) {
        const ordinal = ['', '1st', '2nd', '3rd', '4th', '5th'][todayEntry.rank] || `${todayEntry.rank}th`;
        todayTeaser = `<a href="today.html" class="card" style="display:block;padding:16px 20px;text-decoration:none;transition:border-color 0.2s;">
          <span class="label" style="margin-bottom:4px;">Today</span>
          <div style="font-family:'Playfair Display',serif;font-size:17px;font-weight:700;color:var(--cream);">${name} scored ${todayEntry.total_points} pts today — ${ordinal} place →</div>
        </a>`;
      }

      return `<div id="profile-${id}" class="model-profile">
        <div class="profile-left">
          <div class="profile-header">
            <div class="profile-dot" style="background:${m.accent_color}"></div>
            <div>
              <div class="profile-name">${name}</div>
              <div class="profile-provider">${m.provider}</div>
            </div>
          </div>
          <p class="profile-character">"${quote}"</p>
          <div class="stat-grid">${statBoxes}</div>
          <div class="rank-badge"><span class="rank-num">${m.all_time_rank}</span> ${rankLabel}</div>
        </div>
        <div class="profile-right">
          <div class="game-record">
            <div class="game-record-title">Game-by-Game Record</div>
            ${wordleRow}${connRow}${strandsRow}${keyRow}
          </div>
          ${todayTeaser}
        </div>
      </div>`;
    }

    // ── Render selector button ────────────────────────────────────────────────
    function selectorHTML(m) {
      const name = dName(m.model_name);
      return `<div class="model-selector bracketed" data-id="${m.model_id}" onclick="showModel(${m.model_id}, this)">
        <div class="dot-lg" style="background:${m.accent_color}"></div>
        <div class="m-name">${name}</div>
        <div class="m-provider">${m.provider}</div>
      </div>`;
    }

    // ── Tab switching ─────────────────────────────────────────────────────────
    function showModel(id, btn) {
      document.querySelectorAll('.model-selector').forEach(s => s.classList.remove('active'));
      document.querySelectorAll('.model-profile').forEach(p => p.classList.remove('visible'));
      (btn || document.querySelector(`[data-id="${id}"]`)).classList.add('active');
      document.getElementById('profile-' + id).classList.add('visible');
    }

    // ── Init ──────────────────────────────────────────────────────────────────
    async function init() {
      try {
        const [{ models }, todayData] = await Promise.all([
          apiFetch('/api/models'),
          apiFetch('/api/standings/today')
        ]);

        // Build today lookup: model_id → {total_points, rank}
        const todayMap = {};
        for (const m of todayData.standings) {
          todayMap[m.model_id] = { total_points: m.total_points, rank: m.rank };
        }

        // Build HTML
        const selectors = models.map(selectorHTML).join('');
        const profiles = models.map(m => profileHTML(m, todayMap[m.model_id])).join('');

        document.getElementById('models-container').innerHTML =
          `<div class="models-grid">${selectors}</div>${profiles}`;

        // Show first model (highest ranked)
        if (models.length > 0) showModel(models[0].model_id);

      } catch (_) {
        document.getElementById('models-container').innerHTML = `
          <div class="error-state">
            <strong>Results unavailable</strong>
            Check back soon
          </div>`;
      }
    }

    init();
  </script>

</body>
</html>
